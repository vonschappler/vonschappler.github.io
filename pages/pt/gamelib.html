<!doctype html>
<div class="ui inverted vertical masthead center aligned segment">
    <div id="pageMenu" class="ui container"></div>

    <div class="ui text container">
        <h1 class="ui inverted header">Biblioteca de Jogos</h1>
    </div>
</div>

<div class="ui inverted container" style="padding-top: 2.0em; padding-bottom:2.0em;">
    <table id="gameListPT" class="ui inverted display table scrolling content">
        <thead align="center">
            <tr>
                <th>Platforma</th>
                <th>Título</th>
                <th>Ano de Lançamento</th>
                <th>Tempo de Jogo</th>
                <th>Status</th>
                <th>GameTime(value)</th>
            </tr>
        </thead>
        <tfoot align="center">
            <tr>
                <th colspan="3">
                    Jogos em mídia física não fazem parte dessa lista
                </th>
                <th colspan="2" class="ui right aligned">Última Atualização em: 31/dez/2019</th>
            </tr>
        </tfoot>
    </table>
    <div class="ui raised segment">
        <ul>
            <li>Jogos com <code>(*)</code> ao final de seus nomes, possuem o tempo de jogo calculados de forma imprecisa.</li>
            <li>Plataforma <code>Global</code> significa que o jogo não tem vínculo a nenhuma plataforma conhecida.</li>
            <li>Status <code>Não jogo atualmente</code> pode significar que eu não gostei (ou não gosto mais do jogo) para continuar
                jogando ele, ou ainda significar que os servers (em casos de jogos online) foram desativados.</li>
        </ul>
    </div>
</div>

<script>

    Number.prototype.pad = function(size) {
        var s = String(this);
        while (s.length < (size || 2)) {s = "0" + s;}
        return s;
    }

    function timeConvert(n) {
        var num = n;
        var hours = (num / 60);
        var rhours = Math.floor(hours);
        var minutes = (hours - rhours) * 60;
        var rminutes = Math.round(minutes);
        return rhours + "h " + rminutes.pad(2) + "m";
    }    
    
    $('#gameListPT').DataTable({
        ajax: {
            url: './txt_json/games.json',
            dataSrc:"games",
            async: true
        },
        lengthChange: false,
        //autoWidth: false,
        scrollY: '40vh',
        scrollCollapse: true,
        paging: true,
        pageLength: 75,
        processing: true,
        columns: [
            {"data": "plat"},
            {"data": "title"},
            {"data": "relDate"},
            {"data": "gameTime"},
            {"data": "status_pt"},
            {"data": "gameTime"}
        ],
        order: [
            [4, "asc"],
            [1, "asc"],
            [2, "asc"]
        ],
        columnDefs: [ {
                targets: 0,
                width: "20%"
            }, {
                targets: 1,
                width: "30%"
            },{
                targets: 2,
                width: "10%",
                className: "ui center aligned",
            }, {
                targets: 3,
                width: "15%",
                //sType: 'numeric',
                className: "ui right aligned",
                render: function(data, type, row, meta) {
                    print = timeConvert(data)
                return print
                },
            }, {
                targets: 4,
                width: "25%"
            }, {
                targets: 5,
                sType: 'numeric',
                visible: false
            }, { orderData: [5], 
                targets: 3
            }
        ]
    });
    
</script>
