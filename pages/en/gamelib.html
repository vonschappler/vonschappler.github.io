<!doctype html>
<div class="ui inverted vertical masthead center aligned segment">
    <div id="pageMenu" class="ui container"></div>

    <div class="ui text container">
        <h1 class="ui inverted header">Game Library</h1>
    </div>
</div>

<div class="ui inverted container" style="padding-top: 2.0em; padding-bottom:2.0em;">
    <table id="gameListEN" class="ui inverted display table scrolling content">
        <thead align="center">
            <tr>
                <th>Platform</th>
                <th>Title</th>
                <th>Release Year</th>
                <th>Game Time</th>
                <th>Status</th>
                <th>GameTime(value)</th>
            </tr>
        </thead>
        <tfoot align="center">
            <tr>
                <th colspan="3">
                    Games owned in physical media were not added to this library
                </th>
                <th colspan="2" class="ui right aligned">Last updated on: Dec/31/2019</th>
            </tr>
        </tfoot>
    </table>
    <div class="ui raised segment">
        <ul>
            <li>Games marked with <code>(*)</code> in the end of their name, have their gametime tracked inaccurately.</li>
            <li><code>Global</code> platform means that the game is not linked to any specific platform.</li>
            <li>Status <code>Not playing anymore</code> means that I didn't like (or don't like the game anymore) to continue
                playing it, or even means that the servers (in case of online games) have been disabled.</li>
        </ul>
    </div>
</div>

<script>

    Number.prototype.pad = function(size) {
        var s = String(this);
        while (s.length < (size || 2)) {s = "0" + s;}
        return s;
    }

    function timeConvert(n) {
        var num = n;
        var hours = (num / 60);
        var rhours = Math.floor(hours);
        var minutes = (hours - rhours) * 60;
        var rminutes = Math.round(minutes);
        return rhours + "h " + rminutes.pad(2) + "m";
    }    
    
    $('#gameListEN').DataTable({
        ajax: {
            url: './txt_json/games.json',
            dataSrc:"games"
        },
        lengthChange: false,
        //autoWidth: false,
        scrollY: '40vh',
        scrollCollapse: true,
        paging: true,
        pageLength: 75,
        processing: true,
        columns: [
            {"data": "plat"},
            {"data": "title"},
            {"data": "relDate"},
            {"data": "gameTime"},
            {"data": "status_en"},
            {"data": "gameTime"}
        ],
        order: [
            [4, "asc"],
            [1, "asc"],
            [2, "asc"]
        ],
        columnDefs: [ {
                targets: 0,
                width: "20%"
            }, {
                targets: 1,
                width: "30%"
            },{
                targets: 2,
                width: "10%",
                className: "ui center aligned",
            }, {
                targets: 3,
                width: "15%",
                //sType: 'numeric',
                className: "ui right aligned",
                render: function(data, type, row, meta) {
                    print = timeConvert(data)
                return print
                },
            }, {
                targets: 4,
                width: "25%"
            }, {
                targets: 5,
                sType: 'numeric',
                visible: false
            }, { orderData: [5], 
                targets: 3
            }
        ]
    });
    
</script>
